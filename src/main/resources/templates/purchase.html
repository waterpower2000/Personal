<html lang="en" xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layouts/blank_layout.html}">
<head>
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bs-stepper/dist/css/bs-stepper.min.css" >
    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">

    <!-- =======================================================
    * Template Name: NiceAdmin
    * Updated: May 30 2023 with Bootstrap v5.3.0
    * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
    * Author: BootstrapMade.com
    * License: https://bootstrapmade.com/license/
    ======================================================== -->
    <title>
		Purchase
	</title>
    <style>
    /*form styles*/
#msform {
    text-align: center;
    position: relative;
    margin-top: 30px;
}

#msform fieldset {
    background: white;
    border: 0 none;
    border-radius: 8px;
    box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);
    padding: 20px 30px;
    box-sizing: border-box;
    width: 100%;
    margin: auto;

    /*stacking fieldsets above each other*/
    position: relative;
}

/*Hide all except first fieldset*/
#msform fieldset:not(:first-of-type) {
    display: none;
}
#progressbar li.active:after {
    background: #2098ce;
    color: white;
}
/*inputs*/
/* #msform input, #msform textarea {
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-bottom: 10px;
    width: 100%;
    box-sizing: border-box;
    font-family: montserrat;
    color: #2C3E50;
    font-size: 13px;
} */

#msform input:focus, #msform textarea:focus {
    -moz-box-shadow: none !important;
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
    border: 1px solid #2098ce;
    outline-width: 0;
    transition: All 0.5s ease-in;
    -webkit-transition: All 0.5s ease-in;
    -moz-transition: All 0.5s ease-in;
    -o-transition: All 0.5s ease-in;
}

/*buttons*/
#msform .action-button {
    width: 100px;
    background: #2098ce;
    font-weight: bold;
    color: white;
    border: 0 none;
    border-radius: 25px;
    cursor: pointer;
    padding: 10px 5px;
    margin: 10px 5px;
}

#msform .action-button:hover, #msform .action-button:focus {
    box-shadow: 0 0 0 2px white, 0 0 0 3px #2098ce;
}

#msform .action-button-previous {
    width: 100px;
    background: #aCbEd0;
    font-weight: bold;
    color: white;
    border: 0 none;
    border-radius: 25px;
    cursor: pointer;
    padding: 10px 5px;
    margin: 10px 5px;
}

#msform .action-button-previous:hover, #msform .action-button-previous:focus {
    box-shadow: 0 0 0 2px white, 0 0 0 3px #aCbEd0;
}

/*headings*/
.fs-title {
    font-size: 18px;
    text-transform: uppercase;
    color: #2C3E50;
    margin-bottom: 10px;
    letter-spacing: 2px;
    font-weight: bold;
}

.fs-subtitle {
    font-weight: normal;
    font-size: 13px;
    color: #666;
    margin-bottom: 20px;
}

/*progressbar*/
#progressbar {
    margin-bottom: 30px;
    overflow: hidden;
    /*CSS counters to number the steps*/
    counter-reset: step;
}

#progressbar li {
    list-style-type: none;
    color: #666;
    text-transform: uppercase;
    font-size: 9px;
    width: 33.33%;
    float: left;
    position: relative;
    letter-spacing: 1px;
    font-family: Arial, Helvetica, sans-serif;
}

#progressbar li:before {
    content: counter(step);
    counter-increment: step;
    width: 24px;
    height: 24px;
    line-height: 26px;
    display: block;
    font-size: 12px;
    color: #333;
    background: #e6e6e6;
    border-radius: 25px;
    margin: 0 auto 10px auto;
    position: relative;
    z-index: 3;
}

/*progressbar connectors*/
#progressbar li:after {
    content: '';
    width: 100%;
    height: 2px;
    background: #eeeeee;
    position: absolute;
    left: -52%;
    top: 9px;
    z-index: 1; /*put it behind the numbers*/
}

#progressbar li:first-child:after {
    /*connector not needed before the first step*/
    content: none;
}

/*marking active/completed steps blue*/
/*The number of the step and the connector before it = blue*/
#progressbar li.active:before, #progressbar li.active:after {
    background: #2098ce;
    color: white;
}

.hide{
		  display: none;
	  }
  </style>

</head>

<body>

<main layout:fragment="blank_content">
    <header id="header" class="header fixed-top d-flex align-items-center bg-primary">

        <div class="d-flex align-items-center justify-content-between mt-2">
            <a href="#" class="logo d-flex align-items-center">
                <img th:src="@{/img/mayuri.png}" alt="" >
                <!-- <span class="d-none d-lg-block">NiceAdmin</span> -->
            </a>
            <i class="bi bi-list toggle-sidebar-btn"></i>
        </div><!-- End Logo -->


        <nav class="header-nav ms-auto">
            <ul class="d-flex align-items-center">

                <li class="nav-item d-block d-lg-none">
                    <a class="nav-link nav-icon search-bar-toggle " href="#">
                        <i class="bi bi-search"></i>
                    </a>
                </li><!-- End Search Icon-->



                <li class="nav-item dropdown pe-3">

                    <div class="look">
			<a class="dropdown-item d-flex align-items-center" th:href="@{/api/logout}">
                
                <button type="button" class="btn btn-light"> <i class="bi bi-box-arrow-right"></i>Log Out</button>
                
              </a> 
			</div><!-- End Profile Dropdown Items -->
                </li><!-- End Profile Nav -->

            </ul>
        </nav>
        <!-- End Icons Navigation -->

    </header><!-- End Header -->

    <!-- ======= Sidebar ======= -->
   <aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">       
<!--
      <li class="nav-item">
        <a class="nav-link" th:href="@{/api/home/dashboard}">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li> End Dashboard Nav -->
      <li class="nav-item">
        <a class="nav-link collapsed" th:href="@{/api/inventory/get}">
          <i class="bi bi-grid"></i>
          <span>Inventory Management</span>
        </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" th:href="@{/api/vehicle/add/vehicle}">
                <i class="bi bi-grid"></i>
                <span>Add Vehicle</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" th:href="@{/api/home/purchase}">
              <i class="bi bi-grid"></i>
              <span>Purchase</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" th:href="@{/api/home/sales}">
              <i class="bi bi-grid"></i>
              <span>Sales</span>
            </a>
        </li>
<!--        <li class="nav-item">-->
<!--            <a class="nav-link collapsed" th:href="@{/api/balance/get}">-->
<!--                <i class="bi bi-grid"></i>-->
<!--                <span>Balance Sheet</span>-->
<!--            </a>-->
<!--        </li>-->
      <li th:class="${reg == 'ALL' ? 'nav-item' : 'hide'}">
          <a class="nav-link collapsed" th:href="@{/app/user/add-users.html}">
              <i class="bi bi-grid"></i>
              <span>User Management</span>
          </a>
    </li>   
    <li th:class="${reg == 'ALL' ? 'nav-item' : 'hide'}">
      <a class="nav-link collapsed" th:href="@{/api/region/add}">
        <i class="bi bi-grid"></i>
        <span>Region Management</span>
      </a>
  </li> 
   <li th:class="${reg == 'ALL' ? 'nav-item' : 'hide'}">
            <a class="nav-link collapsed" th:href="@{/api/stock/get}">
              <i class="bi bi-grid"></i>
              <span>Stock Transfer</span>
            </a>
   </li> 
   
   <li class="nav-item">
          <a class="nav-link collapsed" data-bs-target="#tables-nav" data-bs-toggle="collapse" href="#">
            <i class="bi bi-layout-text-window-reverse"></i><span>Accounts</span><i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="tables-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
            <li>
              <a th:href="@{/api/sales/getIncome}">
              <span>Income Ledger</span>
              </a>
            </li>
            <li>
              <a th:href="@{/api/sales/getExpense}">
              <span>Expense Ledger</span>
              </a>
            </li>
            <li>
              <a th:href="@{/api/miscellaneous/get}">
            <span>Miscellaneous Entry</span>
              </a>
            </li>
            <li>
              <a th:href="@{/api/sales/getMain}">
            <span>Main Ledger</span>
              </a>
            </li>
              <li>
                  <a th:href="@{/api/balance/get}">
                      <span>Balance Sheet</span>
                  </a>
              </li>
              <li>
                  <a th:href="@{/api/sales/partPayment/getIncome}">
                      <span>Pending Payment</span>
                  </a>
              </li>
          </ul>
        </li>

    </ul>
  </aside>

    <main id="main" class="main">

        <div class="pagetitle">
            <h1>Purchase</h1>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#"><p th:text="${reg}"></p></a></li>
            </ol>
        </div><!-- End Page Title -->

        <section class="section dashboard">
            <div th:if="${session.message}" class="container">
                <div class="alert alert-success text-center" role="alert">
                    <span th:text="${session.message.content}"></span>
                </div>

                <th:block th:text="${#session.removeAttribute('message')}"></th:block>
            </div>
            <!-- MultiStep Form -->
            <div class="row">
                <div class="col-md-12 col-md-offset-3">
                    <form id="msform" method="post" th:action="@{/api/purchase/}" th:object="${purchase}">
                        <!-- progressbar -->
                        <ul id="progressbar">
                            <li class="active">Veichle Details</li>
                            <li>Supplier Details</li>
                            <li>Payment Details</li>
                        </ul>
                        <script layout:fragment="normalScript" type="application/javascript">

     function getType(details) {
    var a = null;
    var clone = $("#add_html").clone();
    console.log(details);

    if (details === 'Spare_Parts') {
        document.getElementById("bat_no").disabled = true;
        document.getElementById("maker_name").disabled = true;
        document.getElementById("start-dt").disabled = true;
        document.getElementById("end-dt").disabled = true;
        document.getElementById("moter_no").disabled = true;
        document.getElementById("cnt-no").disabled = true;

        $.ajax({
            url: '/api/purchase/get/spare/parts/variants',
            type: 'get',
            success: function (data) {
                $('#JobDiv_id').empty(); // Clear existing options
                $.each(data, function (index, values) {
                    $('#JobDiv_id').append('<option value="' + values.id + '">' + values.name + '</option>');
                });
            },
            error: function (error) {
                alert(error.statusText);
            }
        });
    } else {
        document.getElementById("bat_no").disabled = false;
        document.getElementById("maker_name").disabled = false;
        document.getElementById("start-dt").disabled = false;
        document.getElementById("end-dt").disabled = false;
        document.getElementById("moter_no").disabled = false;
        document.getElementById("cnt-no").disabled = false;

        $.ajax({
            url: '/api/purchase/get/vehicle/variants',
            type: 'get',
            success: function (data) {
                $('#JobDiv_id').empty(); // Clear existing options
                $.each(data, function (index, values) {
                    $('#JobDiv_id').append('<option value="' + values.id + '">' + values.variantName + '</option>');
                });
            },
            error: function (error) {
                alert(error.statusText);
            }
        });
    }
}

                        </script>
                        <!-- fieldsets -->
                        <fieldset>
                            <!-- <h2 class="fs-title">VEICHLE DETAILS</h2> -->

                            <div class="row">

                                <div class="col-md-6">
                                    <select id="type" class="form-select form-select-lg" th:style="@{font-size:15px}"  required th:field="*{type}" onchange="getType(this.value)">
                                        <option value="none">Select an Option</option>
                                        <option value="Vehicle">Vehicle</option>
                                        <option value="Spare_Parts">Spare_Parts</option>
                                    </select>

                                </div>
                                <div class="col-md-6">
                                    <select id="JobDiv_id" class="form-select form-select-lg" th:style="@{font-size:15px}"  required th:field="*{eriksha_variant_details_id}">

                                    </select>

                                </div>

                            </div>
                            <div class="row mt-3">
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="Model Number" th:field="*{model_number}" required="required">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="Chassis Number" th:field="*{chassis_number}" required="required">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="Engine Number" th:field="*{engine_number}" required="required">
                                </div>
                            </div>
                            <div class="row mt-3" id="add_html">
                                <div class="col-md-4">
                                    <input type="text" id="bat_no" class="form-control" placeholder="Battery Number" th:field="*{battery_number}">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" id="maker_name"  class="form-control" placeholder="Battery maker name" th:field="*{battery_maker_name}">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" id="start-dt" class="form-control" placeholder="Warranty Start Date" th:field="*{battery_warranty_start_date}" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div>
                            <div class="row mt-3" id="add_html_two">
                                <div class="col-md-4">
                                    <input type="text" id="end-dt" class="form-control" placeholder="Warranty End Date" th:field="*{battery_warranty_end_date}" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" id="moter_no" class="form-control" placeholder="Motor Number" th:field="*{moter_number}">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" id="cnt-no" class="form-control" placeholder="Controller No." th:field="*{controller_name}">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="Manufacturer Name" th:field="*{manufacturerName}">
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group mb-3">
                                        <span class="input-group-text" id="basic-addon1">91</span>
                                        <input type="text" class="form-control" placeholder="Manufacturer Number" aria-label="phone" aria-describedby="basic-addon1" th:field="*{manufacturerNumber}">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <input type="text" id="purchase_tranaction_date" class="form-control"
                                           placeholder="Purchase Tranaction Date(dd-mm-yyyy)" onfocus="(this.type='date')"
                                           onblur="(this.type='text')" th:field="*{purchase_tranaction_date}" required>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-12">
                                    <textarea class="form-control" placeholder="Manufacturer Address" id="floatingTextarea" style="height: 100px;" th:field="*{manufacturerAddress}"></textarea>
                                </div>
                            </div>
                            <input type="button" name="next" class="next action-button" value="Next"/>
                        </fieldset>
                        <fieldset>
                            <!-- <h2 class="fs-title">Social Profiles</h2> -->
                            <div class="row">
                                <div class="col-md-6">
                                    <input type="text" class="form-control" placeholder="Supplier Name" th:field="*{supplierName}">
                                </div>

                                <div class="col-md-6">
                                    <div class="input-group mb-3">
                                        <span class="input-group-text" id="basic-addon1">91</span>
                                        <input type="text" class="form-control" placeholder="Mobile Number" aria-label="phone" aria-describedby="basic-addon1" th:field="*{supplierNumber}">
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="Adhar Card" aria-label="adharcard" th:field="*{adharCardNo}">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="Pan Card" aria-label="pancard" th:field="*{panCardNo}">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="GST Number" aria-label="gstnum" th:field="*{gstNo}">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-12">
                                    <textarea class="form-control" placeholder="Address" id="floatingTextarea" style="height: 100px;" th:field="*{supplierAddress}"></textarea>
                                </div>
                            </div>
                            <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                            <input type="button" name="next" class="next action-button" value="Next"/>
                        </fieldset>
                        <fieldset>
                            <div class="row">
                                <div class="col-md-6">
                                    <input type="text" class="form-control" placeholder="Purchase total price" aria-label="price" th:field="*{totalPrice}" required="required">
                                </div>
                                <div class="col-md-6">
                                    <input type="text" class="form-control" placeholder="Ex-Showroom Price" aria-label="price" th:field="*{onRoadPrice}" required="required">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <input type="text" class="form-control" placeholder="GST Prcentage" aria-label="gst" th:field="*{gst}" required="required">
                                </div>
                                <div class="col-md-6">
                                    <input type="text" class="form-control" placeholder="Paid Amount" aria-label="gst" th:field="*{perQuantityPrice}" required="required">
                                </div>
                            </div>
                            <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                            <button class="btn btn-primary btn-user btn-block action-button" th:style="@{border-radius:20px;}" type="submit">Submit</button>
                        </fieldset>
                    </form>
                </div>
            </div>
            <!-- /.MultiStep Form -->
        </section>

    </main><!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
        <!-- <div class="copyright">
          &copy; Copyright <strong><span>NiceAdmin</span></strong>. All Rights Reserved
        </div> -->
        <div class="credits">
            <!-- All the links in the footer should remain intact. -->
            <!-- You can delete the links only if you purchased the pro version. -->
            <!-- Licensing information: https://bootstrapmade.com/license/ -->
            <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/ -->
            <span>Â© All Rights reserved. Designed And Developed By
        <a href="https://sysbean.com/" target="_blank">SYSBEAN</a></span>
        </div>
    </footer><!-- End Footer -->

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<!--    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js'></script>
    <script  src="assets/js/script.js"></script>
    <script>
    var current_fs, next_fs, previous_fs; //fieldsets
var left, opacity, scale; //fieldset properties which we will animate
var animating; //flag to prevent quick multi-click glitches

$(".next").click(function(){
	if(animating) return false;
	animating = true;

	current_fs = $(this).parent();
	next_fs = $(this).parent().next();

	//activate next step on progressbar using the index of next_fs
	$("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

	//show the next fieldset
	next_fs.show();
	//hide the current fieldset with style
	current_fs.animate({opacity: 0}, {
		step: function(now, mx) {
			//as the opacity of current_fs reduces to 0 - stored in "now"
			//1. scale current_fs down to 80%
			scale = 1 - (1 - now) * 0.2;
			//2. bring next_fs from the right(50%)
			left = (now * 50)+"%";
			//3. increase opacity of next_fs to 1 as it moves in
			opacity = 1 - now;
			current_fs.css({
        'transform': 'scale('+scale+')',
        'position': 'absolute'
      });
			next_fs.css({'left': left, 'opacity': opacity});
		},
		duration: 800,
		complete: function(){
			current_fs.hide();
			animating = false;
		},
		//this comes from the custom easing plugin
		easing: 'easeInOutBack'
	});
});

$(".previous").click(function(){
	if(animating) return false;
	animating = true;

	current_fs = $(this).parent();
	previous_fs = $(this).parent().prev();

	//de-activate current step on progressbar
	$("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

	//show the previous fieldset
	previous_fs.show();
	//hide the current fieldset with style
	current_fs.animate({opacity: 0}, {
		step: function(now, mx) {
			//as the opacity of current_fs reduces to 0 - stored in "now"
			//1. scale previous_fs from 80% to 100%
			scale = 0.8 + (1 - now) * 0.2;
			//2. take current_fs to the right(50%) - from 0%
			left = ((1-now) * 50)+"%";
			//3. increase opacity of previous_fs to 1 as it moves in
			opacity = 1 - now;
			current_fs.css({'left': left});
			previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
		},
		duration: 800,
		complete: function(){
			current_fs.hide();
			animating = false;
		},
		//this comes from the custom easing plugin
		easing: 'easeInOutBack'
	});
});

$(".submit").click(function(){
	return false;
})
  </script>
    <script src="https://cdn.jsdelivr.net/npm/bs-stepper/dist/js/bs-stepper.min.js"></script>
    <script src="assets/vendor/chart.js/chart.umd.js"></script>
    <script src="assets/vendor/echarts/echarts.min.js"></script>
    <script src="assets/vendor/quill/quill.min.js"></script>
    <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="assets/vendor/tinymce/tinymce.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>

</main>

</body>
</html>